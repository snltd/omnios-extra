diff -wpruN '--exclude=*.orig' a~/src/core/util.c a/src/core/util.c
--- a~/src/core/util.c	2023-03-05 15:48:25.000000000 +0000
+++ a/src/core/util.c	2023-04-06 17:02:04.936345368 +0000
@@ -871,7 +871,7 @@ int janet_cryptorand(uint8_t *out, size_
         }
     }
     return 0;
-#elif defined(JANET_LINUX) || defined(JANET_CYGWIN) || ( defined(JANET_APPLE) && !defined(MAC_OS_X_VERSION_10_7) )
+#elif defined(JANET_LINUX) || defined(JANET_CYGWIN) || ( defined(JANET_APPLE) && !defined(MAC_OS_X_VERSION_10_7) ) || defined(JANET_ILLUMOS)
     /* We should be able to call getrandom on linux, but it doesn't seem
        to be uniformly supported on linux distros.
        On Mac, arc4random_buf wasn't available on until 10.7.
diff -wpruN '--exclude=*.orig' a~/src/include/janet.h a/src/include/janet.h
--- a~/src/include/janet.h	2023-03-05 15:48:25.000000000 +0000
+++ a/src/include/janet.h	2023-04-06 17:01:39.945624645 +0000
@@ -72,6 +72,11 @@ extern "C" {
 #define JANET_CYGWIN 1
 #endif
 
+/* Check for Illumos */
+#if defined(__illumos__)
+#define JANET_ILLUMOS 1
+#endif
+
 /* Check Unix */
 #if defined(_AIX) \
     || defined(__APPLE__) /* Darwin */ \
